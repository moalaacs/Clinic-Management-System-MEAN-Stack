<div class="container">
  <div class="row mt-5 mb-3">
    <div class="text-end">
      <button mat-raised-button (click)="goBack()" class="back-btn">
        <mat-icon>arrow_back</mat-icon>
        Back
      </button>
    </div>
  </div>
  <mat-card class="my-5 profile-card-wrapper">
    <mat-card-header class="profile-card-header">
      <mat-card-title class="header-title">Patient details</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="patient">
        <div class="profile-content">
          <div class="profile-card">
            <div class="profile-pic-wrapper">
              <div class="profile-pic">
                <img
                  class="patient-profile-image"
                  [src]="profilePic"
                  alt="patient profile image"
                />
              </div>
            </div>
            <div class="profile-name-data-sec">
              <div class="profile-name">
                <h2>{{ patient.firstname }} {{ patient.lastname }}</h2>
              </div>
              <div class="profile-important-data-sec">
                <div class="profile-important-data">
                  <h6>Gender</h6>
                  <span>
                    {{ patient.gender }}
                  </span>
                </div>
                <div class="profile-important-data">
                  <h6>Age</h6>
                  <span>
                    {{ patient.age }}
                  </span>
                </div>
                <div class="profile-important-data">
                  <h6>Date of birth</h6>
                  <span>
                    {{ patient.dateOfBirth }}
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="profile-content-grid">
            <div class="profile-data-box">
              <div class="data-icon">
                <i>
                  <svg
                    width="26"
                    height="25"
                    viewBox="0 0 26 25"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M24.3771 16.8033L18.5223 14.2942C18.2167 14.1626 17.8829 14.1096 17.5515 14.1401C17.2201 14.1705 16.9016 14.2834 16.625 14.4685L13.4946 16.5552C11.5814 15.6247 10.033 14.083 9.09399 12.174L9.09423 12.1737L11.1736 8.99646C11.3546 8.72063 11.4644 8.40424 11.4932 8.07558C11.522 7.74693 11.4689 7.41626 11.3386 7.11316L8.82715 1.25342C8.65619 0.855659 8.36099 0.523977 7.98575 0.308034C7.61051 0.0920911 7.17541 0.00350612 6.74561 0.0555428C5.05669 0.272694 3.50459 1.09728 2.37926 2.37525C1.25393 3.65323 0.632341 5.29718 0.630615 7C0.630615 16.9253 8.70532 25 18.6306 25C20.3335 24.9983 21.9774 24.3767 23.2554 23.2513C24.5334 22.126 25.3579 20.5738 25.5751 18.8849C25.627 18.4551 25.5383 18.02 25.3224 17.6448C25.1064 17.2696 24.7748 16.9744 24.3771 16.8033Z"
                      fill="black"
                    />
                  </svg>
                </i>
              </div>
              <div class="data">
                <h6>Phone Number</h6>
                <span>
                  {{ patient.phoneNumber }}
                </span>
              </div>
            </div>
            <div class="profile-data-box">
              <div class="data-icon">
                <i>
                  <svg
                    width="27"
                    height="27"
                    viewBox="0 0 27 27"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M13.6307 0.520508C11.3063 0.520294 9.02438 1.14327 7.02258 2.32456C5.02078 3.50585 3.3723 5.20225 2.24884 7.23707C1.12538 9.27189 0.568028 11.5707 0.634826 13.8941C0.701625 16.2175 1.39013 18.4805 2.62865 20.4474C3.86716 22.4143 5.61037 24.0132 7.67674 25.0775C9.7431 26.1419 12.057 26.6327 14.3775 26.499C16.6981 26.3652 18.9403 25.6117 20.8707 24.317C22.801 23.0223 24.349 21.2337 25.3533 19.1376C24.6423 19.401 23.8888 19.5308 23.1307 19.5205C20.8448 19.5205 19.5651 18.5199 18.8942 17.6804C18.7379 17.4844 18.5968 17.2767 18.472 17.0592C17.7571 18.0386 16.7623 18.7784 15.6187 19.1812C14.4751 19.5841 13.2363 19.631 12.0654 19.3159C10.8946 19.0008 9.84669 18.3384 9.05976 17.4159C8.27283 16.4935 7.7838 15.3543 7.65708 14.1484C7.53036 12.9426 7.77191 11.7266 8.3499 10.6608C8.9279 9.59489 9.81522 8.72911 10.895 8.17749C11.9747 7.62586 13.1962 7.41427 14.3986 7.57058C15.601 7.72689 16.7278 8.24377 17.6307 9.05313V8.52051C17.6307 8.25529 17.736 8.00094 17.9235 7.8134C18.1111 7.62586 18.3654 7.52051 18.6307 7.52051C18.8959 7.52051 19.1502 7.62586 19.3378 7.8134C19.5253 8.00094 19.6307 8.25529 19.6307 8.52051V13.5205C19.6307 15.3453 20.2378 17.5205 23.1307 17.5205C25.9239 17.5205 26.586 15.4926 26.6282 13.7102C26.6291 13.647 26.6307 13.5839 26.6307 13.5205C26.6268 10.0739 25.2559 6.76956 22.8187 4.33243C20.3816 1.8953 17.0773 0.524409 13.6307 0.520508Z"
                      fill="black"
                    />
                  </svg>
                </i>
              </div>
              <div class="data">
                <h6>Email</h6>
                <span>
                  {{ patient.email }}
                </span>
              </div>
            </div>
            <div class="profile-data-box">
              <div class="data-icon">
                <i
                  ><svg
                    width="23"
                    height="29"
                    viewBox="0 0 23 29"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M11.6299 0.52124C8.71362 0.524701 5.91774 1.68474 3.85559 3.74689C1.79344 5.80904 0.633404 8.60492 0.629944 11.5212C0.629944 20.9333 10.6299 28.0427 11.0557 28.3406C11.2241 28.4582 11.4246 28.5212 11.6299 28.5212C11.8353 28.5212 12.0358 28.4582 12.2042 28.3406C12.6299 28.0427 22.6299 20.9333 22.6299 11.5212C22.6265 8.60492 21.4664 5.80904 19.4043 3.74689C17.3421 1.68474 14.5463 0.5247 11.6299 0.52124ZM11.6307 7.5216C12.4218 7.5216 13.1952 7.7562 13.853 8.19572C14.5108 8.63525 15.0234 9.25996 15.3262 9.99087C15.6289 10.7218 15.7082 11.526 15.5538 12.302C15.3995 13.0779 15.0185 13.7906 14.4591 14.35C13.8997 14.9094 13.187 15.2904 12.411 15.4447C11.6351 15.5991 10.8308 15.5199 10.0999 15.2171C9.36904 14.9144 8.74432 14.4017 8.3048 13.7439C7.86527 13.0861 7.63068 12.3127 7.63068 11.5216C7.63066 10.9963 7.73411 10.4762 7.93513 9.99085C8.13614 9.50554 8.43078 9.06458 8.80222 8.69314C9.17365 8.3217 9.61462 8.02707 10.0999 7.82605C10.5852 7.62504 11.1054 7.52159 11.6307 7.5216Z"
                      fill="black"
                    />
                  </svg>
                </i>
              </div>
              <div class="data">
                <h6>Address</h6>
                <span>
                  {{ patient.address.street }}, {{ patient.address.city }},
                  {{ patient.address.country }},
                  {{ patient.address.zipCode }}
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="rest-profile-content">
          <div *ngIf="patient.medicalHistory">
            <p>
              <strong>Medical History:</strong> {{ patient.medicalHistory }}
            </p>
          </div>
          <div class="invoices mt-3" *ngIf="patient.invoices?.length > 0">
            <h2>
              <i class="fa fa-file-invoice-dollar"> </i>
              Invoices
            </h2>

            <mat-accordion *ngIf="patient.invoices?.length > 0">
              <mat-expansion-panel *ngFor="let invoice of patient.invoices">
                <mat-expansion-panel-header>
                  <mat-panel-title class="mat-panel-title"
                    >Invoice {{ invoice.invoice_id }}</mat-panel-title
                  >
                </mat-expansion-panel-header>
                <mat-panel-description class="mat-panel-description">
                  <p><strong>Total:</strong> {{ invoice.total }}</p>

                  <p><strong>Total Due:</strong> {{ invoice.totalDue }}</p>

                  <p><strong>Status:</strong> {{ invoice.status }}</p>
                </mat-panel-description>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
